<!DOCTYPE html>
<html>
<style>
	html{
	}
	body{
		background-color: white;
	}
	div{
		position: relative;
	}
	input[type=submit]{
		background-color: #696969;
		border-radius: 0;
		width: 110px;
		height: 30px;
		color: white;
	}
	input[type=text], [type=submit]{
		font-size: 14px;
	}
	input[type=text]{
		height: 25px;
		border: 2px solid #696969;
	}
	#exportButton{
		width: 140px;
		padding-right: 30px;
		padding-left: 30px;
		padding-top: 5px;
		padding-bottom: 5px;
		background-color: #696969;
		color: white;
	}
	#submitButton{
		width: 160px;
	}
	div#export{
		right: 15%;
		margin-top: -52px;
		position: absolute;
	}
	div#newInput{
		padding-top: 10px;
		padding-bottom: 10px;
	}
	form#inputForm{
		text-align: center;
	}
	div#gallery{
		background-color: blue;
		margin-bottom: 5px;
		height: 100px;
	}
	h1#title{
		text-align: center;
		font-size: 24pt;
	}
	div#mainSpace{
		padding-top: 5px;
		width: 100%;
		margin: 0 auto;
		display: block;
	}
	img#mainCollage{
		min-width: 800px ;
		min-height: 600px;
		max-width: 70vw;
		max-height: 50vh;
		margin: 0 auto;
		display: block;
	}
</style>
	<head>
	<meta charset="UTF-8">
	<title>Build A Collage</title>
	</head>
	<body>
		<div id="header">
			<h1 id="title">Collage for Topic X</h1>
			<div id="export">
				<!-- <form name="export" id="export" method="POST" action="" enctype="multipart/form-data">
					<input type="Submit" id="exportButton" name="export" value="Export" />
				</form> -->
				<a id = "exportButton" onclick="prepareDownload()" download>Export</a>
			</div>
		</div>
		<div id="mainSpace">
			<img id="mainCollage" src="http://www-bcf.usc.edu/~halfond/pics/headshot.jpg">
			
		</div>
		<div id="newInput">
			<form name="enterTopic" id="inputForm" method="POST" action="" enctype="multipart/form-data">
				<input type="text" id="inputBox" name="topic" placeholder="Enter topic" onkeyup="editingStopped()"/>
				<input type="Submit" id="submitButton" name="build" value="Build Another Collage" disabled />
			</form>
		</div>
		<div id="gallery"></div>
	</body>
</html>

<script type="text/javascript">
	function editingStopped(){
        if(document.getElementById('inputBox').value.length > 0) { 
            document.getElementById('submitButton').disabled = false; 
        } else { 
            document.getElementById('submitButton').disabled = true;
        }
    }
    function prepareDownload(){
		var img = document.getElementById('mainCollage');

    	// var canvas = document.createElement('canvas');
    	// canvas.id = "myCanvas";
    	// canvas.height = img.height;
    	// canvas.width = img.width;
    	// console.log('hi');
    	// console.log(canvas.width);
    	// console.log(canvas.height);
    	// context = canvas.getContext('2d');
    	// context.drawImage(img,0,0);
    	// var newImg = canvas.toDataURL('image.png');
    	// var exportDiv = document.getElementById('exportButton1');
    	// exportDiv.href = newImg;

    	var exportDiv = document.getElementById('exportButton1');
    	exportDiv.href = img
    }
</script>